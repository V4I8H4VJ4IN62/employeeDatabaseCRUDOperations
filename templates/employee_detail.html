{% extends 'layout.html' %}
{% block content %}
  <div class="card shadow-sm p-4">
    <h3 class="mb-3">{{ emp.first_name }} {{ emp.last_name }}</h3>

    <div class="row mb-3">
      <div class="col-md-6">
        <p><strong>Email:</strong> {{ emp.email }}</p>
        <p><strong>Phone:</strong> {{ emp.phone or '-' }}</p>
      </div>
      <div class="col-md-6">
        <p><strong>Department:</strong> {{ emp.department.name if emp.department else '-' }}</p>
        <p><strong>Role:</strong> {{ emp.role.title if emp.role else '-' }}</p>
      </div>
    </div>

    {% if emp.manager %}
      <p><strong>Manager:</strong> {{ emp.manager.first_name }} {{ emp.manager.last_name }}</p>
    {% endif %}

    <h5 class="mt-4">Salary History</h5>
    <ul class="list-group mb-3">
      {% for s in emp.salaries %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span>
            {{ s.effective_date.strftime('%Y-%m-%d') }} — {{ s.note or 'N/A' }}
          </span>
          <span class="fw-bold">₹{{ '%.2f'|format(s.salary) }}</span>
        </li>
      {% else %}
        <li class="list-group-item text-muted">No salary records available</li>
      {% endfor %}
    </ul>

    <div class="mt-3">
      <a href="{{ url_for('employee_edit', emp_id=emp.id) }}" class="btn btn-warning me-2">Edit Employee</a>
      <form action="{{ url_for('employee_delete', emp_id=emp.id) }}" method="post" class="d-inline">
        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this employee?')">
          Delete
        </button>
      </form>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">Back</a>
    </div>
  </div>
{% endblock %}
